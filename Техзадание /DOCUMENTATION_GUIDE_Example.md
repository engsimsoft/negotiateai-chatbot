# Руководство по ведению документации проекта

> **Важно:** Этот документ описывает правила и принципы ведения документации.
> При любых изменениях в проекте следуй этим правилам!

---

## 🚨 ОБЯЗАТЕЛЬНОЕ ПРАВИЛО ДЛЯ ВСЕХ ИЗМЕНЕНИЙ

### После ЛЮБЫХ значительных изменений документация ОБЯЗАНА быть обновлена!

**Что считается "значительными изменениями":**
- ✅ Создание новых файлов (компоненты, модули, сервисы)
- ✅ Изменение архитектуры проекта
- ✅ Добавление или удаление зависимостей
- ✅ Изменение API эндпоинтов
- ✅ Изменение структуры папок
- ✅ Добавление новых функций/фич
- ✅ Изменение переменных окружения (.env)
- ✅ Изменение количества файлов, модулей, уроков и т.д.

**Что нужно сделать:**
1. ✅ Обновить все файлы документации согласно правилам SSOT
2. ✅ Пройти чек-лист (см. раздел "Чек-лист при изменениях")
3. ✅ Проверить, что нигде нет дублирования информации
4. ✅ Обновить CHANGELOG.md
5. ✅ Обновить roadmap.md (отметить выполненные задачи)

**Это НЕ рекомендация, это ОБЯЗАТЕЛЬНОЕ требование!**

> 💡 Неактуальная документация хуже, чем отсутствие документации.
> Всегда обновляй документы после изменений!

---

## 🎯 Принципы документации

### 1. Single Source of Truth (SSOT)
- Каждая информация живёт в ОДНОМ месте
- Остальные файлы ссылаются на неё
- Обновил в одном месте → везде актуально

**Пример:**
- ❌ Неправильно: Писать количество уроков в README, QUICKSTART, и PROJECT_SUMMARY
- ✅ Правильно: Написать в README, остальные файлы ссылаются на README

### 2. README = Точка входа
- **Размер:** 80-120 строк (не больше!)
- **Содержание:** Только быстрый старт
- **Детали:** Ссылки на docs/ для подробностей
- **Назначение:** Дать понять что это за проект и как быстро запустить

### 3. docs/ = Детали
- Детальная установка → `docs/setup.md`
- Архитектура → `docs/architecture.md`
- Deployment → `docs/deployment.md`
- Troubleshooting → `docs/troubleshooting.md`

### 4. Не дублируй информацию!
- Если нужно повторить - сделай ссылку
- Один источник правды = легче обновлять

---

## 📁 Обязательная структура файлов

```
ai-learning-agent/
│
├── README.md ──────────────────────► ТОЧКА ВХОДА (80-120 строк)
│                                     • Что это (2-3 предложения)
│                                     • Быстрый старт (команды)
│                                     • Ссылки на docs/
│                                     • Технологии (кратко)
│
├── roadmap.md ─────────────────────► ПЛАН РАЗРАБОТКИ
│                                     • Этапы
│                                     • Задачи с чекбоксами [X]
│                                     • Текущий статус
│
├── CHANGELOG.md ───────────────────► ИСТОРИЯ ИЗМЕНЕНИЙ
│                                     • Semantic Versioning
│                                     • v1.0.0 - что добавили
│                                     • v1.1.0 - что изменили
│
├── DOCUMENTATION_GUIDE.md ─────────► ЭТОТ ФАЙЛ (правила!)
│                                     • Как вести документацию
│                                     • Принципы SSOT
│
├── .env.example ───────────────────► ШАБЛОН ПЕРЕМЕННЫХ (backend)
├── .env.example ───────────────────► ШАБЛОН ПЕРЕМЕННЫХ (frontend)
├── .gitignore ─────────────────────► ЧТО НЕ КОММИТИТЬ
│
├── backend/
│   └── data/lessons/
│
├── frontend/
│
└── docs/ ──────────────────────────► ДЕТАЛЬНАЯ ДОКУМЕНТАЦИЯ
    │
    ├── setup.md ───────────────────► ДЕТАЛЬНАЯ УСТАНОВКА
    │                                 • Prerequisites
    │                                 • Backend setup (шаг за шагом)
    │                                 • Frontend setup (шаг за шагом)
    │                                 • Проверка работы
    │
    ├── architecture.md ────────────► АРХИТЕКТУРА СИСТЕМЫ
    │                                 • ASCII схемы
    │                                 • Слои приложения
    │                                 • Схема потока данных
    │
    ├── deployment.md ──────────────► ДЕПЛОЙ
    │                                 • Настройка backend
    │                                 • Настройка frontend
    │                                 • Environment variables
    │                                 • Проверка production
    │
    ├── troubleshooting.md ─────────► ПРОБЛЕМЫ И РЕШЕНИЯ
    │                                 • Частые ошибки
    │                                 • Решения
    │
    └── decisions/ ─────────────────► ADR (Architecture Decision Records)
        ├── 001-название.md         • Почему выбрали технологию X
        ├── 002-название.md         • Почему выбрали подход Y
        └── template.md             • Шаблон для новых ADR
```

---

## 📝 Шаблоны файлов

### README.md (80-120 строк)

```markdown
# Название проекта

Краткое описание (2-3 предложения).

## Быстрый старт

### Backend
```bash
cd backend
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
cp .env.example .env  # Настрой переменные
uvicorn main:app --reload
```

Backend: http://localhost:8000

### Frontend
```bash
cd frontend
npm install
cp .env.example .env
npm run dev
```

Frontend: http://localhost:5173

## Документация

- [Детальная установка](docs/setup.md)
- [Архитектура](docs/architecture.md)
- [Deployment](docs/deployment.md)
- [Troubleshooting](docs/troubleshooting.md)

## Технологии

**Backend:**
- FastAPI
- Python 3.11+

**Frontend:**
- React 18
- Vite 5

## Roadmap

См. [roadmap.md](roadmap.md)

## Лицензия

MIT
```

---

### roadmap.md

```markdown
# Roadmap: Название проекта

## 🎯 Цель проекта
Краткое описание целей.

## 📊 Текущий статус
- **Этап:** [текущий этап]
- **Прогресс:** X/Y задач (Z%)
- **Следующее:** [что делать дальше]

## 🚀 Этапы разработки

### Этап 1: Название ✅ ЗАВЕРШЕН (или пусто если не завершен)
**Цель:** Краткая цель

- [X] Задача 1 (завершена)
- [X] Задача 2 (завершена)
- [ ] Задача 3 (не завершена)

**Результат:** Что получили

### Этап 2: Название
...
```

---

### CHANGELOG.md

```markdown
# Changelog

## [Unreleased]

### Planned
- Будущие фичи

## [1.0.0] - YYYY-MM-DD

### Added
- Что добавили

### Changed
- Что изменили

### Fixed
- Что починили
```

---

### docs/decisions/template.md (ADR)

```markdown
# ADR [NUMBER]: [TITLE]

**Дата:** YYYY-MM-DD
**Статус:** [Предложено / Принято / Отклонено]

## Контекст
[Опиши проблему]

## Решение
[Что решили делать]

## Причины
1. Причина 1
2. Причина 2

## Последствия

**Плюсы:**
- Плюс 1

**Минусы:**
- Минус 1

## Альтернативы
[Что еще рассматривали и почему отклонили]
```

---

## ✅ Чек-лист при изменениях

### Когда меняешь проект:

**1. Обновил код?**
- [ ] Обновил roadmap.md (отметь [X] выполненные задачи)
- [ ] Добавил запись в CHANGELOG.md
- [ ] Проверь, нужно ли обновить docs/

**2. Добавил новую фичу?**
- [ ] Опиши в README (если важная)
- [ ] Добавь в docs/architecture.md (если меняет архитектуру)
- [ ] Создай ADR если принял важное решение (docs/decisions/)

**3. Изменил количество чего-то (файлов, модулей и т.д.)?**
- [ ] Найди ВСЕ упоминания этого числа (grep)
- [ ] Обнови везде одновременно

**4. Добавил зависимость?**
- [ ] Обнови requirements.txt или package.json
- [ ] Упомяни в docs/setup.md

**5. Изменил .env переменные?**
- [ ] Обнови .env.example
- [ ] Обнови docs/setup.md

---

## ⚠️ Что НЕЛЬЗЯ делать

❌ **НЕ создавай дублирующие файлы:**
- Нет QUICKSTART.md (если есть README)
- Нет PROJECT_SUMMARY.md (если есть README + docs/)
- Нет README в подпапках (backend/README.md, frontend/README.md)

❌ **НЕ копируй информацию:**
- Вместо копирования делай ссылку
- Один источник правды!

❌ **НЕ делай README длинным:**
- Максимум 120 строк
- Детали → в docs/

❌ **НЕ забывай обновлять:**
- Изменил код → обнови документацию
- Нашел баг → добавь в troubleshooting.md

---

## 💡 Главное правило

> **Документация пишется ОДИН РАЗ правильно, обновляется при каждом изменении проекта.**

### Процесс:
1. Создаешь базовую структуру (по шаблонам выше)
2. При каждом изменении обновляешь нужные файлы
3. Следуешь принципу SSOT
4. Проверяешь чек-лист

### Если не знаешь куда добавить информацию:
- **Быстрый старт?** → README.md
- **Детальная инструкция?** → docs/setup.md
- **Как работает?** → docs/architecture.md
- **Как задеплоить?** → docs/deployment.md
- **Что-то не работает?** → docs/troubleshooting.md
- **Важное решение?** → docs/decisions/NNN-название.md
- **История изменений?** → CHANGELOG.md
- **План развития?** → roadmap.md

---

## 🔍 Как проверить SSOT

### Команда для поиска дублирования:

```bash
# Найти все упоминания числа (например, количество уроков)
grep -r "72 урока" .

# Найти все README файлы
find . -name "README.md"

# Найти дублирующие .md файлы в корне
ls *.md
```

### Признаки нарушения SSOT:
- ⚠️ Одна и та же информация в разных файлах
- ⚠️ Несколько README.md
- ⚠️ Файлы типа QUICKSTART.md, GETTING_STARTED.md дублируют README
- ⚠️ Числа/факты различаются в разных местах

---

## 📚 Примеры правильной документации

### ✅ Правильно (SSOT):

**README.md:**
```markdown
AI-наставник с доступом к 72 урокам.

См. [детальную установку](docs/setup.md).
```

**docs/setup.md:**
```markdown
# Детальная установка

## 2. Backend Setup
...
Уроки находятся в `backend/data/lessons/` (72 файла).
```

➡️ Информация о 72 уроках есть в обоих местах, но контекст разный:
- README: общее описание
- docs/setup.md: техническая деталь

### ❌ Неправильно (дублирование):

**README.md:**
```markdown
## Быстрый старт
cd backend
python -m venv venv
...
```

**QUICKSTART.md:**
```markdown
## Быстрый старт
cd backend
python -m venv venv
...
```

➡️ Полное дублирование! Удали QUICKSTART.md.

---

## 🎓 Итог

**Запомни:**
1. SSOT - один источник правды
2. README - 80-120 строк
3. docs/ - детали
4. Ссылки, не копирование
5. Обновляй при изменениях
6. Следуй шаблонам
7. Проверяй чек-лист

**Этот файл - твой гайд. Обращайся к нему при любых изменениях документации!**
