# 1.7 Документация: правильная организация

#### 🎯 Проблема хаотичной документации

**Что происходит без правильной организации:**
- 📄 README.md раздувается до 300-1000 строк (вместо точки входа)
- 🔄 Документы дублируют друг друга (одна и та же информация в 3 местах)
- 🤷 Непонятно где искать информацию (всё размазано по файлам)
- 🤖 Claude Code либо забывает документацию, либо создаёт хаос
- 📝 Документация устаревает (изменил код - забыл обновить docs)
- 🗂️ Нет структуры (файлы называются NOTES.md, TODO.md, IDEAS.md)

**Правильная документация даёт:**
- ✅ Быстро найти любую информацию (знаешь где искать)
- ✅ Нет дублирования (Single Source of Truth)
- ✅ README остаётся компактным (точка входа со ссылками)
- ✅ Claude Code понимает как вести документацию
- ✅ Легко онбордить новых разработчиков
- ✅ Через год вспомнишь почему принял решение X

---

#### 🏗️ Принцип: Single Source of Truth (SSOT)

**Концепция:**
Каждая информация живёт в ОДНОМ месте. Остальные файлы ссылаются на неё.

**❌ Плохо (дублирование):**
```
README.md:
  "API использует FastAPI 0.104.0, запускается через uvicorn..."
  
docs/setup.md:
  "Установи FastAPI 0.104.0, запускай через uvicorn..."
  
docs/api/overview.md:
  "Мы используем FastAPI 0.104.0 с uvicorn сервером..."
```

**Проблема:** Обновил версию FastAPI → забыл изменить в 3 местах → документация устарела.

**✅ Хорошо (SSOT):**
```
README.md:
  "См. детальную установку в docs/setup.md"
  
docs/setup.md:
  "Установи FastAPI 0.104.0, запускай через uvicorn..."
  
docs/api/overview.md:
  "Технологии см. в docs/setup.md"
```

**Результат:** Обновил версию в одном месте (setup.md) → везде актуально.

---

#### 📐 Структура документации (ASCII схема)

```
project/
│
├── README.md ─────────────────────► ТОЧКА ВХОДА (50-150 строк)
│                                    • Что это за проект (2-3 предложения)
│                                    • Быстрый старт (3-5 команд)
│                                    • Ссылки на docs/ (для деталей)
│                                    • Основные команды
│
├── CHANGELOG.md ──────────────────► ИСТОРИЯ ИЗМЕНЕНИЙ
│                                    • v1.0.0 - что добавили
│                                    • v1.1.0 - что изменили
│                                    • v2.0.0 - breaking changes
│
├── .env.example ──────────────────► ШАБЛОН ПЕРЕМЕННЫХ
│                                    • Без реальных значений
│                                    • Комментарии что куда
│
└── docs/ ─────────────────────────► ДЕТАЛЬНАЯ ДОКУМЕНТАЦИЯ
    │
    ├── setup.md ──────────────────► ДЕТАЛЬНАЯ УСТАНОВКА
    │                                • Development окружение
    │                                • Зависимости
    │                                • Настройка БД
    │                                • Первый запуск
    │
    ├── architecture.md ───────────► АРХИТЕКТУРА СИСТЕМЫ
    │                                • Общая схема
    │                                • Слои приложения
    │                                • Почему выбрали X
    │
    ├── deployment.md ─────────────► ДЕПЛОЙ ИНСТРУКЦИИ
    │                                • Production настройка
    │                                • Хостинг платформы
    │                                • CI/CD pipeline
    │
    ├── troubleshooting.md ────────► ПРОБЛЕМЫ И РЕШЕНИЯ
    │                                • Частые ошибки
    │                                • Как исправить X
    │
    ├── api/ ──────────────────────► API ДОКУМЕНТАЦИЯ
    │   ├── endpoints.md           • Список endpoints
    │   ├── authentication.md      • Как работает auth
    │   └── examples.md            • Примеры запросов
    │
    ├── decisions/ ────────────────► ADR (Architecture Decision Records)
    │   ├── 001-why-fastapi.md     • Почему FastAPI, а не Django
    │   ├── 002-why-postgresql.md  • Почему PostgreSQL
    │   └── template.md            • Шаблон для новых ADR
    │
    └── images/ ───────────────────► ДИАГРАММЫ, СХЕМЫ
        ├── architecture.png
        └── database-schema.png

    
    ПРАВИЛА:
    
    1. README.md → Ссылки на docs/
    2. docs/ → Детальная информация
    3. Одна информация = одно место (SSOT)
    4. Ссылки вместо копирования
```

---

#### 📊 Типы документации: что где хранить

**1. README.md - Точка входа (50-150 строк)**

**Что ДОЛЖНО быть:**
- Название проекта + 1-2 предложения что это
- Быстрый старт (Quick Start): 3-5 команд для запуска
- Основные команды (npm run dev, npm run build)
- Ссылки на docs/ для деталей
- Структура проекта (краткая схема папок)
- Технологии (список с версиями)

**Что НЕ ДОЛЖНО быть:**
- ❌ Детальная установка (→ docs/setup.md)
- ❌ Описание всех endpoints (→ docs/api/)
- ❌ Архитектура проекта (→ docs/architecture.md)
- ❌ Troubleshooting (→ docs/troubleshooting.md)
- ❌ История решений (→ docs/decisions/)

**Пример хорошего README.md:**
```markdown
# EngineCamPro v2

Веб-приложение для расчёта профилей кулачков. FastAPI backend + React frontend.

## Быстрый старт

### Backend
```bash
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
uvicorn app.main:app --reload
```

### Frontend
```bash
cd frontend
npm install
npm run dev
```

Backend: http://localhost:8000
Frontend: http://localhost:5173

## Документация

- [Детальная установка](docs/setup.md)
- [Архитектура проекта](docs/architecture.md)
- [API документация](docs/api/endpoints.md)
- [Деплой инструкции](docs/deployment.md)

## Технологии

- Backend: FastAPI 0.104.0, SQLAlchemy 2.0
- Frontend: React 18, Vite 5
- БД: PostgreSQL 15

## Структура проекта

```
backend/
├── app/
│   ├── routers/      # API endpoints
│   ├── services/     # Бизнес-логика
│   └── models/       # SQLAlchemy модели
frontend/
├── src/
│   ├── components/   # React компоненты
│   └── services/     # API calls
```

## Лицензия

MIT
```

**✅ Результат:** README компактный, всё по делу, ссылки на детали.

---

**2. docs/setup.md - Детальная установка**

**Что включить:**
- Prerequisites (что нужно установить заранее)
- Шаг за шагом установка для разработки
- Настройка БД (создание, миграции)
- Настройка .env файла
- Проверка что всё работает
- Troubleshooting для установки

**Пример структуры:**
```markdown
# Детальная установка

## Prerequisites

- Python 3.11+
- Node.js 18+
- PostgreSQL 15+

## Backend Setup

### 1. Клонирование и виртуальное окружение
...

### 2. Настройка .env
Скопируй `.env.example` в `.env`:
...

### 3. Настройка БД
...

## Frontend Setup

### 1. Установка зависимостей
...

### 2. Настройка .env.local
...

## Проверка

Открой http://localhost:8000/docs - должен открыться Swagger UI.
```

---

**3. docs/architecture.md - Архитектура системы**

**Что включить:**
- Общая схема (диаграмма)
- Слои приложения (Presentation → Business → Data Access)
- Почему выбрали такую архитектуру
- Как части системы связаны
- Паттерны которые используем

**Зачем нужен:**
- Понять общую картину
- Объяснить новым разработчикам
- Обосновать решения

---

**4. docs/deployment.md - Деплой инструкции**

**Что включить:**
- Выбор хостинга (Railway, Vercel, AWS)
- Production переменные окружения
- Настройка БД для production
- CI/CD pipeline (если есть)
- Мониторинг и логирование

---

**5. docs/troubleshooting.md - Проблемы и решения**

**Что включить:**
- Частые ошибки при установке
- CORS проблемы
- Проблемы с БД
- Ошибки в production
- Как исправить X

**Формат:**
```markdown
## Ошибка: "CORS policy blocked"

**Симптомы:** Frontend не может обратиться к Backend

**Причина:** CORS middleware не настроен

**Решение:**
1. Добавь CORS в app/main.py
2. Укажи frontend URL в allowed_origins
```

---

**6. docs/api/ - API документация**

**Файлы:**
- `endpoints.md` - список всех endpoints
- `authentication.md` - как работает auth
- `examples.md` - примеры запросов/ответов

**Когда нужна:**
- ✅ Если API используется внешними клиентами
- ✅ Если команда разработчиков
- ⚠️ Если только ты - можно обойтись Swagger UI

---

**7. docs/decisions/ - ADR (Architecture Decision Records)**

**Зачем нужны ADR:**
- Через год вспомнишь почему выбрал FastAPI, а не Django
- Новый разработчик поймёт логику решений
- Избежишь вопросов "а почему мы используем X?"

**Формат ADR:**
```markdown
# ADR 001: Почему выбрали FastAPI

**Дата:** 2025-01-15
**Статус:** Принято

## Контекст

Нужно выбрать backend фреймворк для API. Варианты: Django REST, Flask, FastAPI.

## Решение

Выбрали FastAPI.

## Причины

1. Автоматическая документация (Swagger UI)
   - Не нужно писать docs руками
   
2. Pydantic валидация
   - Проверка данных "из коробки"
   
3. Async поддержка
   - Высокая производительность
   
4. Современный стек
   - Python 3.10+ type hints

## Последствия

**Плюсы:**
- Быстрая разработка
- Меньше кода для валидации
- Отличная документация

**Минусы:**
- Нет встроенной админки (как в Django)
- Меньше "батареек в комплекте"

## Альтернативы

- Django REST: больше функций, но сложнее
- Flask: проще, но больше кода для валидации
```

**Когда создавать ADR:**
- Выбор технологии (FastAPI vs Django, PostgreSQL vs MongoDB)
- Выбор архитектуры (монолит vs микросервисы)
- Важные дизайн решения

---

**8. CHANGELOG.md - История изменений**

**Формат:**
```markdown
# Changelog

Все заметные изменения в проекте документируются здесь.

Формат: [Semantic Versioning](https://semver.org/)

## [Unreleased]
- Функции в разработке

## [1.1.0] - 2025-01-20

### Added
- Endpoint для экспорта в DXF
- Валидация параметров кулачков

### Changed
- Улучшена производительность расчётов (в 2 раза быстрее)

### Fixed
- Исправлена ошибка в расчёте радиуса кривизны

## [1.0.0] - 2025-01-10

### Added
- Базовая структура проекта
- CRUD endpoints для кулачков
- React frontend с графиками
```

**Semantic Versioning:**
- `1.0.0` → Мажорная версия (breaking changes)
- `1.1.0` → Минорная версия (новые фичи, совместимо)
- `1.1.1` → Патч (исправление багов)

**Когда обновлять:**
- При каждом release
- Перед тем как залить на production

---

#### 🎯 Уровни документации для разных проектов

**УРОВЕНЬ 1: Простой лендинг / одностраничник**

```
Структура:
├── README.md          (50-100 строк)
└── .env.example

README.md содержит:
- Что это
- npm install && npm run dev
- npm run build
- Технологии
```

**Когда достаточно:**
- Статичный сайт (Next.js, Astro)
- Простой лендинг без backend
- Pet project для себя
- Proof of concept

**❌ НЕ нужно:**
- docs/ папка
- Детальная архитектура
- ADR

---

**УРОВЕНЬ 2: Веб-приложение с backend (FastAPI + React)**

```
Структура:
├── README.md          (80-150 строк)
├── CHANGELOG.md
├── .env.example
└── docs/
    ├── setup.md
    ├── architecture.md
    ├── deployment.md
    └── troubleshooting.md

README.md содержит:
- Что это (2-3 предложения)
- Быстрый старт (backend + frontend команды)
- Ссылки на docs/ для деталей
- Структура проекта (схема папок)
- Технологии
```

**Когда нужно:**
- Full-stack приложение
- Разделённый backend + frontend
- Планируешь deploy
- Может работать в команде

**✅ Обязательно:**
- docs/setup.md (детальная установка)
- docs/architecture.md (схема слоёв)
- docs/deployment.md (как задеплоить)

**⚠️ Опционально:**
- docs/api/ (если API для внешних клиентов)
- docs/decisions/ (если важные решения)

---

**УРОВЕНЬ 3: Большой проект / монолит (Next.js, Enterprise)**

```
Структура:
├── README.md          (100-150 строк)
├── CHANGELOG.md
├── .env.example
└── docs/
    ├── setup.md
    ├── architecture.md
    ├── deployment.md
    ├── troubleshooting.md
    ├── contributing.md    # Как контрибьютить
    ├── testing.md         # Как писать тесты
    ├── api/
    │   ├── endpoints.md
    │   ├── authentication.md
    │   └── examples.md
    ├── decisions/
    │   ├── 001-why-nextjs.md
    │   ├── 002-why-prisma.md
    │   └── template.md
    └── images/
        ├── architecture.png
        └── database-schema.png
```

**Когда нужно:**
- Продакшн приложение
- Команда разработчиков (2+ человек)
- API для внешних клиентов
- Монетизация
- Open source проект

**✅ Обязательно:**
- Всё из УРОВНЯ 2
- docs/api/ (детальное описание endpoints)
- docs/decisions/ (ADR для важных решений)
- CHANGELOG.md (история изменений)

---

#### 🔄 Как избежать дублирования

**Принцип: Ссылки вместо копирования**

**❌ Плохо (дублирование):**
```
README.md:
  "Создай .env файл:
  DATABASE_URL=...
  SECRET_KEY=...
  API_KEY=..."
  
docs/setup.md:
  "Создай .env файл:
  DATABASE_URL=...
  SECRET_KEY=...
  API_KEY=..."
```

**✅ Хорошо (ссылка):**
```
README.md:
  "Настрой .env файл (см. .env.example или docs/setup.md)"
  
.env.example:
  # Database
  DATABASE_URL=postgresql://user:password@localhost/dbname
  
  # Security
  SECRET_KEY=your-secret-key-here
  
  # External APIs
  API_KEY=your-api-key-here
  
docs/setup.md:
  "## Настройка .env
  
  Скопируй .env.example в .env:
  ```bash
  cp .env.example .env
  ```
  
  Замени значения:
  - DATABASE_URL: ссылка на твою БД
  - SECRET_KEY: сгенерируй через openssl rand -hex 32
  - API_KEY: получи на сайте example.com/api-keys"
```

**Результат:**
- .env.example - шаблон (источник правды)
- docs/setup.md - детальная инструкция как заполнить
- README.md - ссылка на детали

---

**Правило: Если информация нужна в нескольких местах**

1. Напиши её в ОДНОМ месте (источник правды)
2. В остальных местах сделай ссылку

**Пример:**
```markdown
# В docs/api/endpoints.md

Для авторизации см. [Authentication Guide](authentication.md)

# Вместо повторения всей информации про auth
```

---

#### 🤖 Документация для Claude Code (опционально)

**project-context.md - для Claude Projects**

Если используешь Claude Projects, можешь создать файл который объясняет контекст:

```markdown
# Project Context: EngineCamPro v2

## О проекте
Веб-приложение для расчёта профилей кулачков. Переделываем Streamlit монолит в FastAPI + React.

## Технологии
- Backend: FastAPI 0.104.0, SQLAlchemy, PostgreSQL
- Frontend: React 18, Vite, Recharts
- Deploy: Railway (backend), Vercel (frontend)

## Структура
- backend/app/routers/ - API endpoints
- backend/app/services/ - бизнес-логика расчётов
- backend/app/models/ - SQLAlchemy модели
- frontend/src/components/ - React компоненты

## Архитектурные решения
- Следуем Layered Architecture (см. docs/architecture.md)
- Routes только маршрутизация, Services вся логика
- Pydantic для валидации
- Async endpoints для производительности

## Best Practices
- Type hints везде
- Docstrings для сложных функций
- Pytest для тестов
- Pre-commit hooks для форматирования

## Текущая задача
См. roadmap.md
```

**Зачем:**
- Claude Code лучше понимает контекст при работе
- Меньше ошибок в структуре
- Следует твоим паттернам

**⚠️ Это опционально!** Не обязательно для начала.

---

#### 📝 Документирование кода (inline comments)

**⚠️ Опционально, не обязательно сразу!**

**Когда можно добавить docstrings:**
- Сложная функция (не очевидно что делает)
- Public API (другие разработчики используют)
- Математические алгоритмы

**Пример (Python):**
```python
def calculate_cam_profile(
    base_radius: float,
    lift: float,
    duration: float
) -> List[Point]:
    """
    Рассчитывает профиль кулачка.
    
    Args:
        base_radius: Базовый радиус кулачка (мм)
        lift: Максимальный подъём (мм)
        duration: Продолжительность подъёма (градусы)
        
    Returns:
        Список точек профиля (x, y координаты)
        
    Raises:
        ValueError: Если base_radius <= 0
    """
    if base_radius <= 0:
        raise ValueError("Base radius must be positive")
    
    # ... расчёты ...
```

**Когда НЕ нужны docstrings:**
```python
# ❌ Излишне для простой функции
def get_user_by_id(user_id: int) -> User:
    """Get user by ID"""  # Очевидно из названия
    return db.query(User).filter(User.id == user_id).first()
```

**Правило:**
- ✅ Если функция сложная → добавь docstring
- ❌ Если функция очевидна → не нужен

**Claude Code может генерировать документацию:**
```
Ты: Добавь docstrings к сложным функциям в app/services/cam_service.py

Claude Code: [добавляет docstrings только к нужным функциям]
```

---

#### 🤖 Диалоги с Claude Code: как вести документацию

**❌ Плохой диалог (забывает документацию):**
```
Ты: Создай FastAPI проект

Claude Code: [создаёт структуру, НЕТ README, НЕТ docs/]
```

**Проблема:** Не указал требование вести документацию.

---

**❌ Плохой диалог (слишком много документации):**
```
Ты: Создай FastAPI проект с документацией

Claude Code: [создаёт README на 500 строк + дублирует всё в docs/]
```

**Проблема:** Не указал ЧТО документировать.

---

**✅ Хороший диалог (чёткие требования):**
```
Ты: Создай FastAPI проект для расчёта кулачков.

ДОКУМЕНТАЦИЯ:

1. README.md (80-120 строк):
   - Что это за проект (2-3 предложения)
   - Быстрый старт (команды для запуска)
   - Ссылки на docs/ для деталей
   - Структура проекта (схема папок)
   - Технологии с версиями

2. docs/setup.md:
   - Детальная установка шаг за шагом
   - Настройка .env
   - Первый запуск
   - Troubleshooting установки

3. docs/architecture.md:
   - Layered Architecture схема
   - Почему выбрали FastAPI
   - Структура слоёв (Routes → Services → Models)

4. .env.example:
   - Шаблон всех переменных
   - Комментарии что куда

5. CHANGELOG.md:
   - Semantic Versioning
   - ## [Unreleased] секция

ВАЖНО:
- README компактный, детали в docs/
- Нет дублирования (SSOT принцип)
- Ссылки между файлами вместо копирования

Claude Code: [создаёт правильную документацию]
```

**Почему хороший:**
- Чёткая структура документации
- Указан размер README (80-120 строк)
- Указано ЧТО в каждом файле
- Принцип SSOT явно указан
- Ссылки вместо дублирования

---

**✅ Хороший диалог (обновление документации):**
```
Ты: Добавил новый endpoint POST /api/cams/calculate.

Обнови документацию:

1. CHANGELOG.md:
   - Добавь в [Unreleased] секцию:
     "### Added
     - Endpoint для расчёта профиля кулачка"

2. docs/api/endpoints.md:
   - Добавь описание endpoint
   - Пример request/response

НЕ дублируй информацию в README.md (там уже ссылка на docs/api/).

Claude Code: [обновляет нужные файлы, не трогает README]
```

---

**✅ Хороший диалог (создание ADR):**
```
Ты: Мы выбрали FastAPI вместо Django REST.

Создай ADR (Architecture Decision Record):

Файл: docs/decisions/001-why-fastapi.md

Формат:
- Контекст (какая проблема)
- Решение (что выбрали)
- Причины (почему)
- Последствия (плюсы/минусы)
- Альтернативы (что ещё рассматривали)

Claude Code: [создаёт ADR по шаблону]
```

---

**✅ Хороший диалог (roadmap + документация):**
```
Ты: Смотри roadmap.md. Следующая задача: "Add user authentication".

Реализуй endpoint POST /api/auth/login.

После реализации:
1. Отметь задачу [X] в roadmap.md
2. Обнови CHANGELOG.md (секция [Unreleased])
3. Обнови docs/api/authentication.md (если нужно)

Claude Code: [делает задачу, обновляет всю документацию]
```

---

#### ✅ Чек-лист: Документация организована правильно

**Базовая структура:**
- [ ] README.md компактный (50-150 строк)
- [ ] README - точка входа со ссылками на docs/
- [ ] .env.example создан (шаблон без реальных значений)
- [ ] docs/ папка создана (для деталей)

**README.md содержит:**
- [ ] Что это за проект (1-3 предложения)
- [ ] Быстрый старт (команды для запуска)
- [ ] Ссылки на детальную документацию
- [ ] Структура проекта (краткая схема папок)
- [ ] Технологии с версиями

**docs/ папка (для среднего/большого проекта):**
- [ ] docs/setup.md (детальная установка)
- [ ] docs/architecture.md (схема слоёв)
- [ ] docs/deployment.md (инструкции деплоя)
- [ ] docs/troubleshooting.md (частые ошибки)

**Для большого проекта дополнительно:**
- [ ] docs/api/ (если нужно детальное описание)
- [ ] docs/decisions/ (ADR для важных решений)
- [ ] CHANGELOG.md (история изменений)

**Принцип SSOT (Single Source of Truth):**
- [ ] Нет дублирования (одна информация = одно место)
- [ ] Ссылки между файлами вместо копирования
- [ ] .env.example - источник правды для переменных

**Проверка качества:**
- [ ] Новичок может запустить проект по README + docs/setup.md
- [ ] Понятно где искать информацию (чёткая структура)
- [ ] README не раздут (детали в docs/)
- [ ] Документация актуальна (соответствует коду)

**Claude Code настроен:**
- [ ] В промпте указал структуру документации
- [ ] В промпте указал принцип SSOT
- [ ] В промпте указал размер README (80-120 строк)

---

#### 📋 Шаблоны документации

**Шаблон README.md для FastAPI + React:**
```markdown
# Project Name

Краткое описание проекта (1-3 предложения).

## Быстрый старт

### Backend
```bash
cd backend
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
uvicorn app.main:app --reload
```

### Frontend
```bash
cd frontend
npm install
npm run dev
```

## Документация

- [Детальная установка](docs/setup.md)
- [Архитектура](docs/architecture.md)
- [Деплой](docs/deployment.md)

## Технологии

- Backend: FastAPI 0.104.0
- Frontend: React 18
- БД: PostgreSQL 15

## Структура

```
backend/app/
├── routers/    # API endpoints
├── services/   # Бизнес-логика
└── models/     # SQLAlchemy
```
```

---

**Шаблон ADR:**
```markdown
# ADR XXX: Название решения

**Дата:** YYYY-MM-DD
**Статус:** Принято / Отклонено / Устарело

## Контекст

Какая проблема или вопрос.

## Решение

Что решили сделать.

## Причины

1. Причина 1
2. Причина 2

## Последствия

**Плюсы:**
- Плюс 1

**Минусы:**
- Минус 1

## Альтернативы

Что ещё рассматривали и почему отклонили.
```

---

---

#### 📦 Пример: структура документации для RAG проекта

**Проект:** AI Learning Assistant  
**Описание:** ИИ-наставник для курса на основе RAG (векторная БД + LangChain)  
**Стек:** FastAPI + React + LangChain + Pinecone/pgvector

**Структура документации:**

```
ai-learning-assistant/
│
├── README.md                    # 100-120 строк
├── CHANGELOG.md                 # История версий
├── .env.example                 # Шаблон переменных
│
├── backend/                     # FastAPI backend
├── frontend/                    # React frontend
├── data/                        # Данные курса (markdown)
│
└── docs/                        # 📚 ДОКУМЕНТАЦИЯ
    │
    ├── setup.md                 # Детальная установка
    │   • Prerequisites (Python, Node, Pinecone)
    │   • Backend setup (venv, requirements.txt)
    │   • Frontend setup (npm install)
    │   • Настройка .env
    │   • Индексация данных курса
    │   • Проверка что всё работает
    │
    ├── architecture.md          # Архитектура RAG системы
    │   • Общая схема (ASCII диаграмма)
    │   • RAG Flow (вопрос → embedding → search → LLM → ответ)
    │   • Слои: Routers → Services → Data Access
    │   • Почему выбрали такую архитектуру
    │
    ├── deployment.md            # Деплой инструкции
    │   • Production переменные
    │   • Railway (backend) + Vercel (frontend)
    │   • Настройка Pinecone production index
    │   • Мониторинг и логи
    │
    ├── troubleshooting.md       # Частые проблемы
    │   • "Pinecone index not found" → решение
    │   • "OpenAI rate limit" → решение
    │   • "CORS blocked" → решение
    │   • WebSocket connection errors
    │
    ├── api/                     # API документация
    │   ├── endpoints.md         # Список endpoints
    │   │   • POST /api/chat/message
    │   │   • GET /api/search
    │   │   • WebSocket /ws/chat
    │   │
    │   ├── websocket.md         # WebSocket протокол
    │   │   • Connection flow
    │   │   • Message format
    │   │   • Streaming response
    │   │
    │   └── examples.md          # Примеры использования
    │       • curl примеры
    │       • JavaScript примеры
    │
    ├── decisions/               # ADR (Architecture Decision Records)
    │   ├── 001-why-pinecone.md  # Почему Pinecone, а не pgvector
    │   ├── 002-why-langchain.md # Почему LangChain
    │   ├── 003-why-fastapi.md   # Почему FastAPI, а не Django
    │   └── template.md          # Шаблон для новых ADR
    │
    └── images/                  # Диаграммы
        ├── architecture.png     # Схема всей системы
        └── rag-flow.png        # Схема RAG flow
```

**README.md (компактный, 100-120 строк):**
```markdown
# AI Learning Assistant

ИИ-наставник на основе RAG. Отвечает на вопросы по курсу.

## Быстрый старт

### Backend
```bash
cd backend
python -m venv venv && source venv/bin/activate
pip install -r requirements.txt
uvicorn app.main:app --reload
```

### Frontend
```bash
cd frontend
npm install && npm run dev
```

### Индексация данных
```bash
python scripts/index_course_data.py
```

## Документация

- [Детальная установка](docs/setup.md)
- [Архитектура RAG](docs/architecture.md)
- [Деплой](docs/deployment.md)
- [API документация](docs/api/endpoints.md)

## Технологии

- Backend: FastAPI 0.104, LangChain, Pinecone
- Frontend: React 18, Vite 5
- LLM: OpenAI GPT-4-turbo
```

**docs/architecture.md (пример содержимого):**
```markdown
# Архитектура RAG системы

## Общая схема

```
User Question → FastAPI → Embedding Service → Pinecone Search
                    ↓
                RAG Service → LangChain → OpenAI GPT-4
                    ↓
              WebSocket Stream → React Frontend
```

## RAG Flow детально

1. Пользователь: "Что такое REST API?"
2. Embedding Service: векторизует вопрос (OpenAI)
3. Pinecone: ищет 5 похожих chunks из курса
4. RAG Service: формирует prompt с контекстом
5. OpenAI: генерирует ответ на основе контекста
6. WebSocket: стримит ответ пользователю

## Слои приложения

**Presentation Layer** (app/routers/)
- API endpoints
- WebSocket connections

**Business Logic Layer** (app/services/)
- RAG логика
- Embedding генерация
- Prompt engineering

**Data Access Layer** (app/embeddings/, app/models/)
- Pinecone client
- PostgreSQL для истории чатов

Подробнее см. [ADR 001](decisions/001-why-pinecone.md)
```

**docs/decisions/001-why-pinecone.md (пример ADR):**
```markdown
# ADR 001: Почему Pinecone

**Дата:** 2025-10-13
**Статус:** Принято

## Контекст

Нужна векторная БД для RAG. Варианты: Pinecone, pgvector, Weaviate.

## Решение

Выбрали Pinecone.

## Причины

1. Managed service (не нужно настраивать сервер)
2. Бесплатный tier (100k векторов)
3. Простая интеграция с LangChain
4. Sub-100ms latency

## Последствия

**Плюсы:**
- Быстрый старт (5 минут setup)
- Не думаем про scaling

**Минусы:**
- Vendor lock-in
- Платно после 100k векторов

## Альтернативы

- pgvector: если нужно self-hosted
- Weaviate: если нужно open-source
```

**Почему эта структура правильная:**

✅ **README компактный** (100-120 строк) - только суть  
✅ **Детали в docs/** - установка, архитектура отдельно  
✅ **Нет дублирования** - ссылки между файлами  
✅ **ADR документируют решения** - через год вспомнишь почему выбрал Pinecone  
✅ **Troubleshooting отдельно** - частые проблемы в одном месте  

**Уровень проекта:** УРОВЕНЬ 3 (большой проект)
- Full-stack с RAG
- Внешние сервисы (OpenAI, Pinecone)
- Планируется deploy
- Нужна детальная документация

---

**Следующий раздел:** 1.8 Планирование и Roadmap